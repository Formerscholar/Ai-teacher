(this.webpackJsonpteacher_admin=this.webpackJsonpteacher_admin||[]).push([[6],{150:function(e,t,c){"use strict";c.r(t);var a=c(86),n=c.n(a),s=c(88),i=c(108),r=c(109),o=c(3),l=c(0),d=(c(89),c(143)),j=c(146),u=c(145),b=c(151),h=c(148),m=/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-7|9])|(?:5[0-3|5-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[1|8|9]))\d{8}$/,p="wx5f0976e726b587f8",O=encodeURIComponent("http://test.aictb.com/teacher/WXLogin"),g=c(90),x=c.n(g);function f(e){return new Promise((function(t,c){var a=x.a.create({baseURL:"http://test.aictb.com/teacher",timeout:1e4});a.interceptors.request.use((function(e){return e}),(function(e){return e})),a.interceptors.response.use((function(e){e.data.code;return e.data}),(function(e){if(console.log(e),e&&e.response)switch(e.response.status){case 400:e.message="\u8bf7\u6c42\u9519\u8bef";break;case 401:e.message="\u672a\u6388\u6743\u7684\u8bbf\u95ee";break;default:e.message="\u5176\u4ed6\u9519\u8bef\u4fe1\u606f"}return e})),a(e).then((function(e){t(e)})).catch((function(e){c(e)}))}))}function v(e){return Object(o.jsx)(h.a,Object(r.a)({elevation:6,variant:"filled"},e))}function _(e){var t=Object(l.useState)(!1),c=Object(i.a)(t,2),a=c[0],r=c[1],h=Object(l.useState)(!0),g=Object(i.a)(h,2),x=g[0],_=g[1],N=Object(l.useState)(!1),w=Object(i.a)(N,2),k=w[0],y=w[1],S=Object(l.useState)("\u8bf7\u8f93\u5165\u6b63\u786e\u624b\u673a\u53f7\u7801!"),C=Object(i.a)(S,2),M=C[0],T=C[1],I=Object(l.useState)(!1),L=Object(i.a)(I,2),R=L[0],W=L[1],Q=Object(l.useState)(!0),E=Object(i.a)(Q,2),F=E[0],G=E[1],J=Object(l.useState)("60"),P=Object(i.a)(J,2),U=P[0],q=P[1],z=Object(l.useState)(""),A=Object(i.a)(z,2),D=A[0],H=A[1],V=Object(l.useState)(""),X=Object(i.a)(V,2),$=X[0],B=X[1],K=null,Y=null;Object(l.useEffect)((function(){return window.WxLogin({self_redirect:!0,id:"login_container",appid:p,scope:"snsapi_login",redirect_uri:O,state:Math.ceil(1e3*Math.random()),style:"black",href:""}),function(){clearInterval(K),clearTimeout(Y)}}),[]);var Z=function(){var e=Object(s.a)(n.a.mark((function e(){var t,c,a,s,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T("\u8bf7\u8f93\u5165\u6b63\u786e\u624b\u673a\u53f7\u7801!"),!m.test(D)){e.next=16;break}return W(!0),t=60,K=setInterval((function(){t--,q(t)}),1e3),console.log(U),Y=setTimeout((function(){W(!1)}),6e4),e.next=9,f({url:"/getLoginCode",method:"GET",params:{mobile:D}});case 9:c=e.sent,a=c.code,s=c.data,i=c.msg,console.log("getLoginCode",a,s,i),e.next=18;break;case 16:y(!0),setTimeout((function(){y(!1)}),2888);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var t=Object(s.a)(n.a.mark((function t(){var c,a,s,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f({url:"/login",method:"GET",params:{mobile:D,code:$}});case 2:c=t.sent,a=c.code,s=c.data,i=c.msg,T(i),200==a?(localStorage.setItem("token",s.token),e.history.push("/main")):(y(!0),setTimeout((function(){y(!1)}),2888));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(o.jsxs)("div",{id:"Login",children:[Object(o.jsxs)("div",{className:"content",children:[Object(o.jsx)("div",{className:"left_box",children:Object(o.jsx)("img",{src:"https://aictb.oss-cn-shanghai.aliyuncs.com/teacher/login_img.png",alt:"login_img"})}),Object(o.jsxs)("div",{className:"right_box",children:[Object(o.jsxs)("div",{className:"right_imgs",onClick:function(){a?(r(!a),setTimeout((function(){_(!x),window.WxLogin({self_redirect:!0,id:"login_container",appid:p,scope:"snsapi_login",redirect_uri:O,state:Math.ceil(1e3*Math.random()),style:"black",href:""})}),300)):(_(!x),setTimeout((function(){r(!a)}),300))},children:[a?Object(o.jsx)(d.a,{in:a,children:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"WeChat",children:"\u5fae\u4fe1\u626b\u7801\u767b\u5f55"}),Object(o.jsx)("img",{className:"QRcode",src:"https://aictb.oss-cn-shanghai.aliyuncs.com/teacher/QRcode.png",alt:"QRcode"})]})}):"",x?Object(o.jsx)(d.a,{in:x,children:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("img",{src:"https://aictb.oss-cn-shanghai.aliyuncs.com/teacher/SMSlogin.png",className:"phone_right_icon"}),Object(o.jsx)("img",{className:"QRcode",src:"https://aictb.oss-cn-shanghai.aliyuncs.com/teacher/computer.png",alt:"QRcode"})]})}):""]}),a?Object(o.jsx)(d.a,{in:a,children:Object(o.jsxs)("div",{className:"form_box",children:[Object(o.jsx)("div",{className:"title",children:"\u8001\u5e08\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"}),Object(o.jsxs)("div",{className:"phone",children:[Object(o.jsx)("span",{children:"\u624b\u673a\u53f7"}),Object(o.jsx)(j.a,{id:"standard-basic",className:"userinput",label:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",onInput:function(e){var t=e.target.value;m.test(t)&&H(t)}})]}),Object(o.jsxs)("div",{className:"Verification",children:[Object(o.jsx)("span",{children:"\u9a8c\u8bc1\u7801"}),Object(o.jsx)(j.a,{id:"standard-basic",className:"userinput",label:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onInput:function(e){var t=e.target.value;B(t),G(!1)},InputProps:{endAdornment:Object(o.jsx)("button",{disabled:R,onClick:Z,children:R?"\u518d\u6b21\u83b7\u53d6(".concat(U,")"):"\u83b7\u53d6\u9a8c\u8bc1\u7801"})}})]}),Object(o.jsx)("div",{className:"btns",children:Object(o.jsx)(u.a,{variant:"contained",disabled:F,className:"login",onClick:ee,children:"\u767b\u5f55"})}),Object(o.jsx)("div",{className:"tip",children:"\u5ba2\u670d\u7535\u8bdd:0514-82885886"})]})}):"",x?Object(o.jsx)(d.a,{in:x,children:Object(o.jsxs)("div",{className:"wechatForm",children:[Object(o.jsxs)("div",{className:"title_box",children:[Object(o.jsx)("img",{className:"wechat_icon",src:"https://aictb.oss-cn-shanghai.aliyuncs.com/teacher/wechat_icon.png",alt:"wechat_icon"}),Object(o.jsx)("span",{className:"text",children:"\u5fae\u4fe1\u626b\u7801\u767b\u5f55"})]}),Object(o.jsxs)("div",{className:"content_box",children:[Object(o.jsx)("div",{id:"login_container"}),Object(o.jsx)("img",{className:"MobileWeChattip",src:"https://aictb.oss-cn-shanghai.aliyuncs.com/teacher/MobileWeChattip.png",alt:"MobileWeChattip"})]}),Object(o.jsx)("div",{className:"footer_box",children:"\u6253\u5f00\u5fae\u4fe1,\u626b\u4e00\u626b\u767b\u5f55"})]})}):""]})]}),Object(o.jsx)(b.a,{open:k,autoHideDuration:2888,anchorOrigin:{vertical:"top",horizontal:"center"},children:Object(o.jsx)(v,{severity:"error",children:M})})]})}x.a.defaults.withCredentials=!0;t.default=Object(l.memo)(_)},89:function(e,t,c){}}]);